(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"5gaU":function(e,r,n){"use strict";n.d(r,"d",(function(){return p})),n.d(r,"g",(function(){return d})),n.d(r,"c",(function(){return m})),n.d(r,"e",(function(){return v})),n.d(r,"h",(function(){return h})),n.d(r,"f",(function(){return x})),n.d(r,"a",(function(){return y})),n.d(r,"b",(function(){return g}));var t=n("Obii"),a=n("t8hP"),o=n("NXk7"),i=n("3SGO"),u=n("v2PB"),c=n("Xmxp"),s=n("BAXh");function f(e,r,n,t,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?r(c):Promise.resolve(c).then(t,a)}function l(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(e){f(o,t,a,i,u,"next",e)}function u(e){f(o,t,a,i,u,"throw",e)}i(void 0)}))}}function p(e){return function(){var r=l(regeneratorRuntime.mark((function r(n){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.b.getFolderByUid(e);case 2:t=r.sent,n(Object(s.b)(t)),n(Object(i.e)(Object(u.a)(t)));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function d(e){return function(){var r=l(regeneratorRuntime.mark((function r(n){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.b.put("/api/folders/".concat(e.uid),{title:e.title,version:e.version});case 2:a=r.sent,c.b.emit(t.AppEvents.alertSuccess,["Folder saved"]),n(Object(i.d)({path:"".concat(a.url,"/settings")}));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function m(e){return function(){var r=l(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.b.delete("/api/folders/".concat(e));case 2:n(Object(i.d)({path:"dashboards"}));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function v(e){return function(){var r=l(regeneratorRuntime.mark((function r(n){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.b.get("/api/folders/".concat(e,"/permissions"));case 2:t=r.sent,n(Object(s.c)(t));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function b(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function h(e,r){return function(){var n=l(regeneratorRuntime.mark((function n(t,a){var i,u,c,s,f,l,p,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=a().folder,u=[],c=!0,s=!1,f=void 0,n.prev=5,l=i.permissions[Symbol.iterator]();case 7:if(c=(p=l.next()).done){n.next=17;break}if(!(d=p.value).inherited){n.next=11;break}return n.abrupt("continue",14);case 11:m=b(d),e===d&&(m.permission=r),u.push(m);case 14:c=!0,n.next=7;break;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(5),s=!0,f=n.t0;case 23:n.prev=23,n.prev=24,c||null==l.return||l.return();case 26:if(n.prev=26,!s){n.next=29;break}throw f;case 29:return n.finish(26);case 30:return n.finish(23);case 31:return n.next=33,o.b.post("/api/folders/".concat(i.uid,"/permissions"),{items:u});case 33:return n.next=35,t(v(i.uid));case 35:case"end":return n.stop()}}),n,null,[[5,19,23,31],[24,,26,30]])})));return function(e,r){return n.apply(this,arguments)}}()}function x(e){return function(){var r=l(regeneratorRuntime.mark((function r(n,t){var a,i,u,c,s,f,l,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=t().folder,i=[],u=!0,c=!1,s=void 0,r.prev=5,f=a.permissions[Symbol.iterator]();case 7:if(u=(l=f.next()).done){r.next=15;break}if(!(p=l.value).inherited&&p!==e){r.next=11;break}return r.abrupt("continue",12);case 11:i.push(b(p));case 12:u=!0,r.next=7;break;case 15:r.next=21;break;case 17:r.prev=17,r.t0=r.catch(5),c=!0,s=r.t0;case 21:r.prev=21,r.prev=22,u||null==f.return||f.return();case 24:if(r.prev=24,!c){r.next=27;break}throw s;case 27:return r.finish(24);case 28:return r.finish(21);case 29:return r.next=31,o.b.post("/api/folders/".concat(a.uid,"/permissions"),{items:i});case 31:return r.next=33,n(v(a.uid));case 33:case"end":return r.stop()}}),r,null,[[5,17,21,29],[22,,24,28]])})));return function(e,n){return r.apply(this,arguments)}}()}function y(e){return function(){var r=l(regeneratorRuntime.mark((function r(n,t){var a,i,u,c,s,f,l,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=t().folder,i=[],u=!0,c=!1,s=void 0,r.prev=5,f=a.permissions[Symbol.iterator]();case 7:if(u=(l=f.next()).done){r.next=15;break}if(!(p=l.value).inherited){r.next=11;break}return r.abrupt("continue",12);case 11:i.push(b(p));case 12:u=!0,r.next=7;break;case 15:r.next=21;break;case 17:r.prev=17,r.t0=r.catch(5),c=!0,s=r.t0;case 21:r.prev=21,r.prev=22,u||null==f.return||f.return();case 24:if(r.prev=24,!c){r.next=27;break}throw s;case 27:return r.finish(24);case 28:return r.finish(21);case 29:return i.push({userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}),r.next=32,o.b.post("/api/folders/".concat(a.uid,"/permissions"),{items:i});case 32:return r.next=34,n(v(a.uid));case 34:case"end":return r.stop()}}),r,null,[[5,17,21,29],[22,,24,28]])})));return function(e,n){return r.apply(this,arguments)}}()}function g(e){return function(){var r=l(regeneratorRuntime.mark((function r(n){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(a.getBackendSrv)().post("/api/folders",{title:e});case 2:o=r.sent,c.b.emit(t.AppEvents.alertSuccess,["Folder Created","OK"]),n(Object(i.d)({path:t.locationUtil.stripBaseFromUrl(o.url)}));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}},tg3w:function(e,r,n){"use strict";n.r(r),n.d(r,"NewDashboardsFolder",(function(){return y}));var t=n("q1tI"),a=n.n(t),o=n("/MKj"),i=n("kDLi"),u=n("ZGyg"),c=n("5gaU"),s=n("lzJ5"),f=n("d4Ek");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,r,n,t,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void n(e)}u.done?r(c):Promise.resolve(c).then(t,a)}function d(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function m(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function v(e,r){return!r||"object"!==l(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,r){return(h=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var x={folderName:""},y=function(e){function r(){var e,n;d(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(n=v(this,(e=b(r)).call.apply(e,[this].concat(a)))).onSubmit=function(e){n.props.createNewFolder(e.folderName)},n.validateFolderName=function(e){return f.a.validateNewFolderName(e).then((function(){return!0})).catch((function(e){return e.message}))},n}var n,t,o;return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&h(e,r)}(r,e),n=r,(t=[{key:"render",value:function(){var e=this;return a.a.createElement(u.a,{navModel:this.props.navModel},a.a.createElement(u.a.Contents,null,a.a.createElement("h3",null,"New Dashboard Folder"),a.a.createElement(i.Form,{defaultValues:x,onSubmit:this.onSubmit},(function(r){var n,t,o=r.register,u=r.errors;return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.Field,{label:"Folder name",invalid:!!u.folderName,error:u.folderName&&u.folderName.message},a.a.createElement(i.Input,{name:"folderName",ref:o({required:"Folder name is required.",validate:(n=regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.validateFolderName(n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})),t=function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(e){p(o,t,a,i,u,"next",e)}function u(e){p(o,t,a,i,u,"throw",e)}i(void 0)}))},function(e){return t.apply(this,arguments)})})})),a.a.createElement(i.Button,{type:"submit"},"Create"))}))))}}])&&m(n.prototype,t),o&&m(n,o),r}(t.PureComponent),g={createNewFolder:c.b};r.default=Object(o.connect)((function(e){return{navModel:Object(s.a)(e.navIndex,"manage-dashboards")}}),g)(y)},v2PB:function(e,r,n){"use strict";function t(e){var r={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards & permissions",url:"",text:e.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:"folder-dashboards-".concat(e.uid),text:"Dashboards",url:e.url}]};return e.canAdmin&&r.children.push({active:!1,icon:"lock",id:"folder-permissions-".concat(e.uid),text:"Permissions",url:"".concat(e.url,"/permissions")}),e.canSave&&r.children.push({active:!1,icon:"cog",id:"folder-settings-".concat(e.uid),text:"Settings",url:"".concat(e.url,"/settings")}),r}function a(e){var r=t({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,version:0});return r.children[e].active=!0,{main:r,node:r.children[e]}}n.d(r,"a",(function(){return t})),n.d(r,"b",(function(){return a}))}}]);
//# sourceMappingURL=NewDashboardsFolder.1c3a1c85d09a392be724.js.map