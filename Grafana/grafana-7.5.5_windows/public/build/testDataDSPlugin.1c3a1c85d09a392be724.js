(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{RQDA:function(e,t,a){"use strict";a.r(t);var r=a("Obii"),n=a("F/XL"),o=a("p0ib"),i=a("0/uQ"),l=a("vubp"),u=a("t8hP");function c(e){return 0===e.indexOf("value")?[{name:e,children:[]}]:function e(t,a,r){if(r>=a.length)return t;if("*"===a[r])return t;var n=a[r],o=[],i=[n];n.startsWith("{")&&(i=n.replace(/\{|\}/g,"").split(","));var l=!0,u=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value,f=!0,m=!1,y=void 0;try{for(var b,v=i[Symbol.iterator]();!(f=(b=v.next()).done);f=!0){var h=b.value;if(-1!==h.indexOf("*")){var g=h.replace("*","");new RegExp("^".concat(g,".*"),"gi").test(p.name)&&(o=o.concat(e([p],a,r+1)))}else p.name===h&&(o=o.concat(e(p.children,a,r+1)))}}catch(e){m=!0,y=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw y}}}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}return o}(function e(t,a){var r=[];if(a>5)return[];for(var n=0,o=["A","B","C"];n<o.length;n++){var i=o[n],l="".concat(t).concat(i);r.push({name:l,children:e(l,a+1)})}return r}("",0),e.split("."),0)}var s=a("LvDl"),d=a("6blF"),p=0;function f(){return p=(p+Math.floor(5*Math.random()))%m.length,m[p]}var m=["At","vero","eos","et","accusamus","et","iusto","odio","dignissimos","ducimus","qui","blanditiis","praesentium","voluptatum","deleniti","atque","corrupti","quos","dolores","et","quas","molestias","excepturi","sint","occaecati","cupiditate","non","provident","similique","sunt","in","culpa","qui","officia","deserunt","mollitia","animi","id","est","laborum","et","dolorum","fuga","Et","harum","quidem","rerum","facilis","est","et","expedita","distinctio","Nam","libero","tempore","cum","soluta","nobis","est","eligendi","optio","cumque","nihil","impedit","quo","minus","id","quod","maxime","placeat","facere","possimus","omnis","voluptas","assumenda","est","omnis","dolor","repellendus","Temporibus","autem","quibusdam","et","aut","officiis","debitis","aut","rerum","necessitatibus","saepe","eveniet","ut","et","voluptates","repudiandae","sint","et","molestiae","non","recusandae","Itaque","earum","rerum","hic","tenetur","a","sapiente","delectus","ut","aut","reiciendis","voluptatibus","maiores","alias","consequatur","aut","perferendis","doloribus","asperiores","repellat"],y={type:"signal",speed:250,spread:3.5,noise:2.2,bands:1};function b(e,t){var a=Object(s.defaults)(e.stream,y);if("signal"===a.type)return function(e,t,a){return new d.a((function(n){var o="signal-".concat(a.panelId,"-").concat(e.refId),i=a.maxDataPoints||1e3,l=new r.CircularDataFrame({append:"tail",capacity:i});l.refId=e.refId,l.name=e.alias||"Signal "+e.refId,l.addField({name:"time",type:r.FieldType.time}),l.addField({name:"value",type:r.FieldType.number});for(var u=t.spread,c=t.speed,s=t.bands,d=void 0===s?0:s,p=t.noise,f=0;f<d;f++){var m=d>1?" ".concat(f+1):"";l.addField({name:"Min"+m,type:r.FieldType.number}),l.addField({name:"Max"+m,type:r.FieldType.number})}for(var y=100*Math.random(),b=null,v=function(e){y+=(Math.random()-.5)*u;var t=0;l.fields[t++].values.add(e),l.fields[t++].values.add(y);for(var a=y,r=y,n=0;n<d;n++)a-=Math.random()*p,r+=Math.random()*p,l.fields[t++].values.add(a),l.fields[t++].values.add(r)},h=Date.now()-i*c,g=0;g<i;g++)v(h),h+=c;return setTimeout((function e(){v(Date.now()),n.next({data:[l],key:o,state:r.LoadingState.Streaming}),b=setTimeout(e,c)}),5),function(){console.log("unsubscribing to stream "+o),clearTimeout(b)}}))}(e,a,t);if("logs"===a.type)return function(e,t,a){return new d.a((function(n){var o="logs-".concat(a.panelId,"-").concat(e.refId),i=a.maxDataPoints||1e3,l=new r.CircularDataFrame({append:"tail",capacity:i});l.refId=e.refId,l.name=e.alias||"Logs "+e.refId,l.addField({name:"line",type:r.FieldType.string}),l.addField({name:"time",type:r.FieldType.time}),l.meta={preferredVisualisationType:"logs"};var u=t.speed,c=null;return setTimeout((function e(){l.fields[0].values.add(Date.now()),l.fields[1].values.add(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=f();t.length<e;)t+=" "+f();return t}()),n.next({data:[l],key:o}),c=setTimeout(e,u)}),5),function(){console.log("unsubscribing to stream "+o),clearTimeout(c)}}))}(e,a,t);if("fetch"===a.type)return function(e,t,a){return new d.a((function(n){var o,i="fetch-".concat(a.panelId,"-").concat(e.refId),l=a.maxDataPoints||1e3,u=new r.CircularDataFrame({append:"tail",capacity:l});u.refId=e.refId,u.name=e.alias||"Fetch "+e.refId;var c=new r.CSVReader({callback:{onHeader:function(t){u.fields.length&&((u=new r.CircularDataFrame({append:"tail",capacity:l})).refId=e.refId,u.name="Fetch "+e.refId);var a=!0,n=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var s=i.value;u.addField(s)}}catch(e){n=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(n)throw o}}},onRow:function(e){u.add(e)}}}),s=function e(t){if(t.value){var a=(new TextDecoder).decode(t.value);c.readCSV(a)}return n.next({data:[u],key:i,state:t.done?r.LoadingState.Done:r.LoadingState.Streaming}),t.done?(console.log("Finished stream"),void n.complete()):o.read().then(e)};if(!t.url)throw new Error("query.url is not defined");return fetch(new Request(t.url)).then((function(e){e.body&&(o=e.body.getReader()).read().then(s)})),function(){console.log("unsubscribing to stream "+i)}}))}(e,a,t);throw new Error("Unknown Stream Type: ".concat(a.type))}var v=a("+JjO");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){return g(this,t),O(this,F(t).apply(this,arguments))}var a,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),a=t,(r=[{key:"toDataQuery",value:function(e){return{refId:"TestDataDataSource-QueryVariable",stringInput:e.query,scenarioId:"variables-query",csvWave:null,points:[]}}}])&&w(a.prototype,r),n&&w(a,n),t}(r.StandardVariableSupport),T=a("kDLi"),E={fields:[{name:T.NodeGraphDataFrameFieldNames.id,type:r.FieldType.string,config:{links:[{title:"Traces/All",url:"",internal:{query:{queryType:"getTraceSummaries",query:'service(id(name: "${__data.fields.name}", type: "${__data.fields.type}"))'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}},{title:"Traces/OK",url:"",internal:{query:{queryType:"getTraceSummaries",query:'service(id(name: "${__data.fields.name}", type: "${__data.fields.type}")) { ok = true }'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}},{title:"Traces/Errors",url:"",internal:{query:{queryType:"getTraceSummaries",query:'service(id(name: "${__data.fields.name}", type: "${__data.fields.type}")) { error = true }'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}},{title:"Traces/Faults",url:"",internal:{query:{queryType:"getTraceSummaries",query:'service(id(name: "${__data.fields.name}", type: "${__data.fields.type}")) { fault = true }'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}}]},values:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]},{name:T.NodeGraphDataFrameFieldNames.title,type:r.FieldType.string,config:{displayName:"Name"},values:["auth","products","customers","orders","products","orders","api","shipping","orders","execute-api","shipping","www","api","www","products"]},{name:T.NodeGraphDataFrameFieldNames.subTitle,type:r.FieldType.string,config:{displayName:"Type"},values:["Compute","SQL","SQL","SQL","remote","Function","Compute","Function","Function","remote","Function","Compute","client","client","Compute"]},{name:T.NodeGraphDataFrameFieldNames.mainStat,type:r.FieldType.number,config:{unit:"ms/t",displayName:"Average response time"},values:[3.5394042646735553,15.906441318223264,4.913011921591567,7.4163203042094095,1092,22.85961441405067,56.135855729084696,4.45946191601527,12.818300278280843,4.25,12.565442646791492,77.63447512700567,40.387096774193544,77.63447512700567,27.648950187374872]},{name:T.NodeGraphDataFrameFieldNames.secondaryStat,type:r.FieldType.number,config:{unit:"t/min",displayName:"Transactions per minute"},values:[50.56317154501667,682.4,512.8416666666667,125.64444444444445,.005585812037424941,137.59722222222223,300.0527777777778,30.582348853370394,125.77222222222223,.028706417080318163,30.582348853370394,165.675,.100021510002151,165.675,162.33055555555555]},{name:T.NodeGraphDataFrameFieldNames.arc+"success",type:r.FieldType.number,config:{color:{mode:r.FieldColorModeId.Fixed,fixedColor:"green"},displayName:"Sucesss"},values:[.9338865684765882,1,1,1,.5,1,.9901128505170387,.9069260134520997,1,0,.9069260134520997,.9624432037288534,0,.9624432037288534,.9824945669843769]},{name:T.NodeGraphDataFrameFieldNames.arc+"faults",type:r.FieldType.number,config:{color:{mode:r.FieldColorModeId.Fixed,fixedColor:"red"},displayName:"faults"},values:[0,0,0,0,.5,0,.009479813736472288,0,0,0,0,.017168821152524185,0,.017168821152524185,.01750543301562313]},{name:T.NodeGraphDataFrameFieldNames.arc+"errors",type:r.FieldType.number,config:{color:{mode:r.FieldColorModeId.Fixed,fixedColor:"semi-dark-yellow"},displayName:"Errors"},values:[.06611343152341174,0,0,0,0,0,.0004073357464890436,.09307398654790038,0,1,.09307398654790038,.02038797511862247,1,.02038797511862247,0]},{name:T.NodeGraphDataFrameFieldNames.arc+"throttled",type:r.FieldType.number,config:{color:{mode:r.FieldColorModeId.Fixed,fixedColor:"purple"},displayName:"Throttled"},values:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}],meta:{preferredVisualisationType:"nodeGraph"},name:"nodes"},_={fields:[{name:T.NodeGraphDataFrameFieldNames.id,type:r.FieldType.string,config:{links:[{title:"Traces/All",url:"",internal:{query:{queryType:"getTraceSummaries",query:'edge("${__data.fields.sourceName}", "${__data.fields.targetName}")'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}},{title:"Traces/OK",url:"",internal:{query:{queryType:"getTraceSummaries",query:'edge("${__data.fields.sourceName}", "${__data.fields.targetName}") { ok = true }'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}},{title:"Traces/Errors",url:"",internal:{query:{queryType:"getTraceSummaries",query:'edge("${__data.fields.sourceName}", "${__data.fields.targetName}") { error = true }'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}},{title:"Traces/Faults",url:"",internal:{query:{queryType:"getTraceSummaries",query:'edge("${__data.fields.sourceName}", "${__data.fields.targetName}") { fault = true }'},datasourceUid:"Ax4erxHGz",datasourceName:"Trace data source"}}]},values:["0__2","5__8","6__0","6__5","6__9","6__2","6__14","6__4","8__3","10__7","11__0","11__6","12__6","13__11","14__1","14__2","14__10"]},{name:T.NodeGraphDataFrameFieldNames.source,type:r.FieldType.string,config:{},values:[0,5,6,6,6,6,6,6,8,10,11,11,12,13,14,14,14]},{name:"sourceName",type:r.FieldType.string,config:{},values:["auth","orders","api","api","api","api","api","api","orders","shipping","www","www","api","www","products","products","products"]},{name:T.NodeGraphDataFrameFieldNames.target,type:r.FieldType.string,config:{},values:[2,8,0,5,9,2,14,4,3,7,0,6,6,11,1,2,10]},{name:"targetName",type:r.FieldType.string,config:{},values:["customers","orders","auth","orders","execute-api","customers","products","products","orders","shipping","auth","api","api","www","products","customers","shipping"]},{name:T.NodeGraphDataFrameFieldNames.mainStat,type:r.FieldType.string,config:{displayName:"Response percentage"},values:["Success 100.00%","Success 100.00%","Success 100.00%","Success 100.00%","Errors 100.00%","Success 100.00%","Faults 1.75%","Faults 50.00%","Success 100.00%","Errors 9.31%","Errors 6.62%","Faults 1.13%","Errors 100.00%","Faults 1.72%","Success 100.00%","Success 100.00%","Faults 9.30%"]},{name:T.NodeGraphDataFrameFieldNames.secondaryStat,type:r.FieldType.number,config:{unit:"t/min",displayName:"Transactions per minute"},values:[50.56317154501667,125.77222222222223,.03333333333333333,137.59722222222223,.022222222222222223,299.96666666666664,162.33055555555555,.005555555555555556,125.64444444444445,30.582348853370394,50.51111111111111,299.9166666666667,.100021510002151,165.675,682.4,162.33055555555555,30.558333333333334]}],meta:{preferredVisualisationType:"nodeGraph"},name:"edges"};function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){D(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(e){var t=Math.random(),a=1-t;return{id:e.toString(),title:"service:".concat(e),subTitle:"service",success:t,error:a,stat1:Math.random(),stat2:Math.random(),edges:[]}}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e,t,a){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(u.getTemplateSrv)();return q(this,t),(a=M(this,V(t).call(this,e))).templateSrv=r,a.variables=new j,a}var a,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),a=t,(i=[{key:"query",value:function(e){var a=[],r=[],i=!0,l=!1,u=void 0;try{for(var c,s=e.targets[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var d=c.value;if(!d.hide)switch(d.scenarioId){case"live":r.push(H(d,e));break;case"streaming_client":r.push(b(d,e));break;case"grafana_api":r.push(Q(d,e));break;case"arrow":r.push(L(d,e));break;case"annotations":r.push(this.annotationDataTopicTest(d,e));break;case"variables-query":r.push(this.variablesQuery(d,e));break;case"node_graph":r.push(this.nodesQuery(d,e));break;default:a.push(d)}}}catch(e){l=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(l)throw u}}if(a.length){var p=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{targets:a});r.push(G(V(t.prototype),"query",this).call(this,p))}return 0===r.length?Object(n.a)({data:[]}):o.a.apply(void 0,r)}},{key:"annotationDataTopicTest",value:function(e,t){var a=this.buildFakeAnnotationEvents(t.range,10),o=new r.ArrayDataFrame(a);return o.meta={dataTopic:r.DataTopic.Annotations},Object(n.a)({key:e.refId,data:[o]}).pipe(Object(l.a)(100))}},{key:"buildFakeAnnotationEvents",value:function(e,t){for(var a=e.from.valueOf(),r=[],n=(e.to.valueOf()-a)/t,o=0;o<t;o++)r.push({time:a,text:'This is the text, <a href="https://grafana.com">Grafana.com</a>',tags:["text","server"]}),a+=n;return r}},{key:"annotationQuery",value:function(e){return Promise.resolve(this.buildFakeAnnotationEvents(e.range,10))}},{key:"getQueryDisplayText",value:function(e){return e.alias?e.scenarioId+" as "+e.alias:e.scenarioId}},{key:"testDatasource",value:function(){return Promise.resolve({status:"success",message:"Data source is working"})}},{key:"getScenarios",value:function(){return this.scenariosCache||(this.scenariosCache=this.getResource("scenarios")),this.scenariosCache}},{key:"variablesQuery",value:function(e,t){var a=e.stringInput,o=c(this.templateSrv.replace(a,Object(v.e)({query:a,wildcardChar:"*",options:t.scopedVars}))).map((function(e){return{value:e.name,text:e.name}})),i=new r.ArrayDataFrame(o);return Object(n.a)({data:[i]}).pipe(Object(l.a)(100))}},{key:"nodesQuery",value:function(e,t){var a,o,i,u=(null===(a=e.nodes)||void 0===a?void 0:a.type)||"random";switch(u){case"random":i=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=[],o={id:"0",title:"root",subTitle:"client",success:1,error:0,stat1:Math.random(),stat2:Math.random(),edges:[]};n.push(o);for(var i=[o],l=3,u=1;u<a;u++){var c=C(u);n.push(c);var s=Math.floor(Math.random()*Math.floor(i.length-1)),d=i[s];d.edges.push(c.id),d.edges.length>=l&&i.splice(s,1),i.push(c)}for(var p=Math.floor(a/2),f=0;f<=p;f++){var m=Math.floor(Math.random()*Math.floor(n.length-1)),y=Math.floor(Math.random()*Math.floor(n.length-1));m!==y&&"0"!==n[m].id&&"0"!==n[m].id&&n[m].edges.push(n[m].id)}for(var b=(D(e={},T.NodeGraphDataFrameFieldNames.id,{values:new r.ArrayVector,type:r.FieldType.string}),D(e,T.NodeGraphDataFrameFieldNames.title,{values:new r.ArrayVector,type:r.FieldType.string}),D(e,T.NodeGraphDataFrameFieldNames.subTitle,{values:new r.ArrayVector,type:r.FieldType.string}),D(e,T.NodeGraphDataFrameFieldNames.mainStat,{values:new r.ArrayVector,type:r.FieldType.number}),D(e,T.NodeGraphDataFrameFieldNames.secondaryStat,{values:new r.ArrayVector,type:r.FieldType.number}),D(e,T.NodeGraphDataFrameFieldNames.arc+"success",{values:new r.ArrayVector,type:r.FieldType.number,config:{color:{fixedColor:"green"}}}),D(e,T.NodeGraphDataFrameFieldNames.arc+"errors",{values:new r.ArrayVector,type:r.FieldType.number,config:{color:{fixedColor:"red"}}}),e),v=new r.MutableDataFrame({name:"nodes",fields:Object.keys(b).map((function(e){return P({},b[e],{name:e})})),meta:{preferredVisualisationType:"nodeGraph"}}),h=(D(t={},T.NodeGraphDataFrameFieldNames.id,{values:new r.ArrayVector,type:r.FieldType.string}),D(t,T.NodeGraphDataFrameFieldNames.source,{values:new r.ArrayVector,type:r.FieldType.string}),D(t,T.NodeGraphDataFrameFieldNames.target,{values:new r.ArrayVector,type:r.FieldType.string}),t),g=new r.MutableDataFrame({name:"edges",fields:Object.keys(h).map((function(e){return P({},h[e],{name:e})})),meta:{preferredVisualisationType:"nodeGraph"}}),w=new Set,O=0,F=n;O<F.length;O++){var S=F[O];b.id.values.add(S.id),b.title.values.add(S.title),b.subTitle.values.add(S.subTitle),b.mainStat.values.add(S.stat1),b.secondaryStat.values.add(S.stat2),b.arc__success.values.add(S.success),b.arc__errors.values.add(S.error);var j=!0,E=!1,_=void 0;try{for(var I,N=S.edges[Symbol.iterator]();!(j=(I=N.next()).done);j=!0){var k=I.value,x="".concat(S.id,"--").concat(k);w.has(x)||(w.add(x),h.id.values.add("".concat(S.id,"--").concat(k)),h.source.values.add(S.id),h.target.values.add(k))}}catch(e){E=!0,_=e}finally{try{j||null==N.return||N.return()}finally{if(E)throw _}}}return[v,g]}(null===(o=e.nodes)||void 0===o?void 0:o.count);break;case"response":i=[new r.MutableDataFrame(E),new r.MutableDataFrame(_)];break;default:throw new Error("Unknown node_graph sub type ".concat(u))}return Object(n.a)({data:i}).pipe(Object(l.a)(100))}}])&&A(a.prototype,i),s&&A(a,s),t}(u.DataSourceWithBackend);function L(e,t){var a=[];if(e.stringInput&&e.stringInput.length>10)try{var o=Object(r.base64StringToArrowTable)(e.stringInput),i=Object(r.arrowTableToDataFrame)(o);i.refId=e.refId,a=[i]}catch(t){console.warn("Error reading saved arrow",t);var l=Object(u.toDataQueryError)(t);return l.refId=e.refId,Object(n.a)({state:r.LoadingState.Error,error:l,data:a})}return Object(n.a)({state:r.LoadingState.Done,data:a,key:t.requestId+e.refId})}function Q(e,t){var a="/api/".concat(e.stringInput);return Object(i.a)(Object(u.getBackendSrv)().get(a).then((function(e){var t=new r.ArrayDataFrame(e);return{state:r.LoadingState.Done,data:[t]}})))}var $=1e3;function H(e,t){if(!e.channel)throw new Error("Missing channel config");return Object(u.getLiveMeasurementsObserver)({scope:r.LiveChannelScope.Grafana,namespace:"testdata",path:e.channel},"testStream.".concat($++))}var U=a("q1tI"),z=a.n(U);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,K(t).call(this,e))}var a,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),a=t,(r=[{key:"render",value:function(){return z.a.createElement("div",null,"See github for more information about setting up a reproducible test environment.",z.a.createElement("br",null),z.a.createElement("br",null),z.a.createElement("a",{className:"btn btn-inverse",href:"https://github.com/grafana/grafana/tree/master/devenv",target:"_blank",rel:"noopener noreferrer"},"GitHub"),z.a.createElement("br",null))}}])&&Y(a.prototype,r),n&&Y(a,n),t}(U.PureComponent);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){return te(this,t),re(this,ne(t).apply(this,arguments))}var a,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,e),a=t,(r=[{key:"render",value:function(){return z.a.createElement("div",null)}}])&&ae(a.prototype,r),n&&ae(a,n),t}(U.PureComponent),le=a("Y8YH"),ue=a("Csm0"),ce=[{label:"Speed (ms)",id:"speed",placeholder:"value",min:10,step:10},{label:"Spread",id:"spread",placeholder:"value",min:.5,step:.1},{label:"Noise",id:"noise",placeholder:"value",min:0,step:.1},{label:"Bands",id:"bands",placeholder:"bands",min:0,step:1}],se=[{value:"signal",label:"Signal"},{value:"logs",label:"Logs"},{value:"fetch",label:"Fetch"}],de=function(e){var t,a,r,n=e.onChange,o=e.query,i=function(e){var t=e.target,a=t.name,r=t.value;n({target:{name:a,value:Number(r)}})};return z.a.createElement(T.InlineFieldRow,null,z.a.createElement(T.InlineField,{label:"Type",labelWidth:14},z.a.createElement(T.Select,{width:32,onChange:function(e){var t=e.value;n({target:{name:"type",value:t}})},defaultValue:se[0],options:se})),"signal"===(null==o||null===(t=o.stream)||void 0===t?void 0:t.type)&&ce.map((function(e){var t,a=e.label,r=e.id,n=e.min,l=e.step,u=e.placeholder;return z.a.createElement(T.InlineField,{label:a,labelWidth:14,key:r},z.a.createElement(T.Input,{width:32,type:"number",id:"stream.".concat(r,"-").concat(o.refId),name:r,min:n,step:l,value:null===(t=o.stream)||void 0===t?void 0:t[r],placeholder:u,onChange:i}))})),"fetch"===(null==o||null===(a=o.stream)||void 0===a?void 0:a.type)&&z.a.createElement(T.InlineField,{label:"URL",labelWidth:14,grow:!0},z.a.createElement(T.Input,{type:"text",name:"url",id:"stream.url-".concat(o.refId),value:null==o||null===(r=o.stream)||void 0===r?void 0:r.url,placeholder:"Fetch URL",onChange:n})))};function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){me(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ye(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var be=function(e){var t=e.onChange,a=e.query,n=e.onRunQuery,o=a.points.map((function(e,t){return{label:Object(r.dateTime)(e[1]).format("MMMM Do YYYY, H:mm:ss")+" : "+e[0],value:t}}));return z.a.createElement(T.Form,{onSubmit:function(e){var o=r.dateMath.parse(e.newPointTime),i=[].concat(ye(a.points),[[Number(e.newPointValue),o.valueOf()]]).sort((function(e,t){return e[1]-t[1]}));t(fe({},a,{points:i})),n()},maxWidth:"none"},(function(e){var i=e.register,l=e.control,u=(0,e.watch)("selectedPoint");return z.a.createElement(T.InlineFieldRow,null,z.a.createElement(T.InlineField,{label:"New value",labelWidth:14},z.a.createElement(T.Input,{width:32,type:"number",placeholder:"value",id:"newPointValue-".concat(a.refId),name:"newPointValue",ref:i})),z.a.createElement(T.InlineField,{label:"Time",labelWidth:14},z.a.createElement(T.Input,{width:32,id:"newPointTime-".concat(a.refId),placeholder:"time",name:"newPointTime",ref:i,defaultValue:Object(r.dateTime)().format()})),z.a.createElement(T.InlineField,null,z.a.createElement(T.Button,{variant:"secondary"},"Add")),z.a.createElement(T.InlineField,{label:"All values"},z.a.createElement(T.InputControl,{control:l,as:T.Select,options:o,width:32,name:"selectedPoint",onChange:function(e){return e[0]},placeholder:"Select point"})),void 0!==(null==u?void 0:u.value)&&z.a.createElement(T.InlineField,null,z.a.createElement(T.Button,{type:"button",variant:"destructive",onClick:function(){l.setValue("selectedPoint",[{value:void 0,label:"Select value"}]),function(e){var r=a.points.filter((function(t,a){return a!==e.value}));t(fe({},a,{points:r})),n()}(u)}},"Delete")))}))},ve=[{label:"Series count",id:"seriesCount",placeholder:"1",min:1,step:1},{label:"Start value",id:"startValue",placeholder:"auto",step:1},{label:"Spread",id:"spread",placeholder:"1",min:.5,step:.1},{label:"Noise",id:"noise",placeholder:"0",min:0,step:.1},{label:"Min",id:"min",placeholder:"none",step:.1},{label:"Max",id:"max",placeholder:"none",step:.1}],he=ue.selectors.components.DataSource.TestData.QueryTab,ge=function(e){var t=e.onChange,a=e.query;return z.a.createElement(T.InlineFieldRow,null,ve.map((function(e){var r=e.label,n=e.id,o=e.min,i=e.step,l=e.placeholder,u=null==he?void 0:he[n];return z.a.createElement(T.InlineField,{label:r,labelWidth:14,key:n,"aria-label":u},z.a.createElement(T.Input,{width:32,name:n,type:"number",id:"randomWalk-".concat(n,"-").concat(a.refId),min:o,step:i,value:a[n]||l,placeholder:l,onChange:t}))})))},we=[{label:"Step",id:"timeStep",placeholder:"60",tooltip:"The number of seconds between datapoints."},{label:"On Count",id:"onCount",placeholder:"3",tooltip:"The number of values within a cycle, at the start of the cycle, that should have the onValue."},{label:"Off Count",id:"offCount",placeholder:"6",tooltip:"The number of offValues within the cycle."},{label:"On Value",id:"onValue",placeholder:"1",tooltip:'The value for "on values", may be an int, float, or null.'},{label:"Off Value",id:"offValue",placeholder:"1",tooltip:'The value for "off values", may be a int, float, or null.'}],Oe=function(e){var t=e.onChange,a=e.query,r=function(e){var a=e.target,r=a.name,n=a.value;t({target:{name:r,value:Number(n)}})};return z.a.createElement(T.InlineFieldRow,null,we.map((function(e){var t,n=e.label,o=e.id,i=e.placeholder,l=e.tooltip;return z.a.createElement(T.InlineField,{label:n,labelWidth:14,key:o,tooltip:l},z.a.createElement(T.Input,{width:32,type:"number",name:o,id:"pulseWave.".concat(o,"-").concat(a.refId),value:null===(t=a.pulseWave)||void 0===t?void 0:t[o],placeholder:i,onChange:r}))})))},Fe=[{label:"Step",type:"number",id:"timeStep",placeholder:"60",tooltip:"The number of seconds between datapoints."},{label:"CSV Values",type:"text",id:"valuesCSV",placeholder:"1,2,3,4",tooltip:"Comma separated values. Each value may be an int, float, or null and must not be empty. Whitespace and trailing commas are removed."}],Se=function(e){var t=e.onChange,a=e.query;return z.a.createElement(T.InlineFieldRow,null,Fe.map((function(e,r){var n,o=e.label,i=e.id,l=e.type,u=e.placeholder,c=e.tooltip,s=r===Fe.length-1;return z.a.createElement(T.InlineField,{label:o,labelWidth:14,key:i,tooltip:c,grow:s},z.a.createElement(T.Input,{width:s?void 0:32,type:l,name:i,id:"csvWave.".concat(i,"-").concat(a.refId),value:null===(n=a.csvWave)||void 0===n?void 0:n[i],placeholder:u,onChange:t}))})))},je={points:[],stream:y,pulseWave:{timeStep:60,onCount:3,onValue:2,offCount:3,offValue:1},csvWave:{timeStep:60,valuesCSV:"0,0,2,2,1,1"},stringInput:"",scenarioId:"random_walk",lines:10,refId:"",alias:""};function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _e=[{label:"random-2s-stream",value:"random-2s-stream",description:"Random stream with points every 2s"},{label:"random-flakey-stream",value:"random-flakey-stream",description:"Stream that returns data in random intervals"}],Ie=function(e){var t=e.onChange,a=e.query;return z.a.createElement(T.InlineFieldRow,null,z.a.createElement(T.InlineField,{label:"Channel",labelWidth:14},z.a.createElement(T.Select,{width:32,onChange:function(e){var r=e.value;t(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){Ee(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{channel:r}))},placeholder:"Select channel",options:_e,value:_e.find((function(e){return e.value===a.channel}))})))};function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(a),!0).forEach((function(t){Ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ne(e){var t,a,r=e.query,n=e.onChange,o=(null===(t=r.nodes)||void 0===t?void 0:t.type)||"random";return z.a.createElement(T.InlineFieldRow,null,z.a.createElement(T.InlineField,{label:"Data type",labelWidth:14},z.a.createElement(T.Select,{options:ke.map((function(e){return{label:e,value:e}})),value:ke.find((function(e){return e===o})),onChange:function(e){return n(De({},r.nodes,{type:e.value}))},width:32})),"random"===o&&z.a.createElement(T.InlineField,{label:"Count",labelWidth:14},z.a.createElement(T.Input,{type:"number",name:"count",value:null===(a=r.nodes)||void 0===a?void 0:a.count,width:32,onChange:function(e){return n(De({},r.nodes,{count:e.currentTarget.value?parseInt(e.currentTarget.value,10):0}))},placeholder:"10"})))}var ke=["random","response"];function xe(e,t,a,r,n,o,i){try{var l=e[o](i),u=l.value}catch(e){return void a(e)}l.done?t(u):Promise.resolve(u).then(r,n)}function qe(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){xe(o,r,n,i,l,"next",e)}function l(e){xe(o,r,n,i,l,"throw",e)}i(void 0)}))}}function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(a),!0).forEach((function(t){Ge(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ve=["random_walk","predictable_pulse","predictable_csv_wave"],Re=[{value:"datasources",label:"Data Sources"},{value:"search",label:"Search"},{value:"annotations",label:"Annotations"}],We=ue.selectors.components.DataSource.TestData.QueryTab;a.d(t,"plugin",(function(){return Qe}));var Le=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};Le.template="<h2>Annotation scenario</h2>";var Qe=new r.DataSourcePlugin(W).setConfigEditor(ie).setQueryEditor((function(e){var t,a=e.query,r=e.datasource,n=e.onChange,o=e.onRunQuery;a=Me({},je,{},a);var i=Object(le.a)(qe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.getScenarios());case 1:case"end":return e.stop()}}),e)}))),[]),l=i.loading,u=i.value,c=function(e){n(e),o()},s=Object(U.useMemo)((function(){return null==u?void 0:u.find((function(e){return e.id===a.scenarioId}))}),[u,a]),d=null==s?void 0:s.id,p=function(e){var t=e.target,r=t.name,n=t.value,o=n;"number"===t.type&&(o=Number(n)),"levelColumn"===r&&(o=e.target.checked),c(Me({},a,Ge({},r,o)))},f=function(e){return function(t){var r=t.target,n=r.name,o=r.value,i=o;"number"===r.type&&(i=Number(o)),c(Me({},a,Ge({},e,Me({},a[e],Ge({},n,i)))))}},m=f("stream"),y=f("pulseWave"),b=f("csvWave"),v=Object(U.useMemo)((function(){return(u||[]).map((function(e){return{label:e.name,value:e.id}})).sort((function(e,t){return e.label.localeCompare(t.label)}))}),[u]),h=Object(U.useMemo)((function(){return Ve.includes(a.scenarioId)}),[a]);return l?null:z.a.createElement(z.a.Fragment,null,z.a.createElement(T.InlineFieldRow,{"aria-label":We.scenarioSelectContainer},z.a.createElement(T.InlineField,{labelWidth:14,label:"Scenario"},z.a.createElement(T.Select,{options:v,value:v.find((function(e){return e.value===a.scenarioId})),onChange:function(e){var t=null==u?void 0:u.find((function(t){return t.id===e.value}));if(t){var r=Me({},a,{scenarioId:e.value});t.stringInput&&(r.stringInput=t.stringInput),"grafana_api"===t.id?r.stringInput="datasources":"streaming_client"===t.id?r.stringInput="":"live"===t.id&&(r.channel||(r.channel="random-2s-stream")),c(r)}},width:32})),(null==s?void 0:s.stringInput)&&z.a.createElement(T.InlineField,{label:"String Input"},z.a.createElement(T.Input,{width:32,id:"stringInput-".concat(a.refId),name:"stringInput",placeholder:a.stringInput,value:a.stringInput,onChange:p})),z.a.createElement(T.InlineField,{label:"Alias",labelWidth:14},z.a.createElement(T.Input,{width:32,id:"alias-".concat(a.refId),type:"text",placeholder:"optional",pattern:'[^<>&\\\\"]+',name:"alias",value:a.alias,onChange:p})),h&&z.a.createElement(T.InlineField,{label:"Labels",labelWidth:14,tooltip:z.a.createElement(z.a.Fragment,null,"Set labels using a key=value syntax:",z.a.createElement("br",null),'{ key = "value", key2 = "value" }',z.a.createElement("br",null),'key="value", key2="value"',z.a.createElement("br",null),"key=value, key2=value",z.a.createElement("br",null))},z.a.createElement(T.Input,{width:32,id:"labels-".concat(a.refId),name:"labels",onChange:p,value:null===(t=a)||void 0===t?void 0:t.labels,placeholder:"key=value, key2=value2"}))),"manual_entry"===d&&z.a.createElement(be,{onChange:c,query:a,onRunQuery:o}),"random_walk"===d&&z.a.createElement(ge,{onChange:p,query:a}),"streaming_client"===d&&z.a.createElement(de,{onChange:m,query:a}),"live"===d&&z.a.createElement(Ie,{onChange:c,query:a}),"logs"===d&&z.a.createElement(T.InlineFieldRow,null,z.a.createElement(T.InlineField,{label:"Lines",labelWidth:14},z.a.createElement(T.Input,{type:"number",name:"lines",value:a.lines,width:32,onChange:p,placeholder:"10"})),z.a.createElement(T.InlineField,{label:"Level",labelWidth:14},z.a.createElement(T.InlineSwitch,{onChange:p,name:"levelColumn",value:!!a.levelColumn}))),"grafana_api"===d&&z.a.createElement(T.InlineField,{labelWidth:14,label:"Endpoint"},z.a.createElement(T.Select,{options:Re,onChange:function(e){var t=e.value;c(Me({},a,{stringInput:t}))},width:32,value:Re.find((function(e){return e.value===a.stringInput}))})),"arrow"===d&&z.a.createElement(T.InlineField,{grow:!0},z.a.createElement(T.TextArea,{name:"stringInput",value:a.stringInput,rows:10,placeholder:"Copy base64 text data from query result",onChange:p})),"predictable_pulse"===d&&z.a.createElement(Oe,{onChange:y,query:a}),"predictable_csv_wave"===d&&z.a.createElement(Se,{onChange:b,query:a}),"node_graph"===d&&z.a.createElement(Ne,{onChange:function(e){return n(Me({},a,{nodes:e}))},query:a}))})).setAnnotationQueryCtrl(Le).addConfigPage({title:"Setup",icon:"list-ul",body:Z,id:"setup"})}}]);
//# sourceMappingURL=testDataDSPlugin.1c3a1c85d09a392be724.js.map