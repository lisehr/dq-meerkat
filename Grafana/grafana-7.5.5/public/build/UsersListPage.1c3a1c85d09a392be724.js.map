{"version":3,"sources":["webpack:///./public/app/features/users/UsersTable.tsx","webpack:///./public/app/features/users/InviteeRow.tsx","webpack:///./public/app/features/users/InviteesTable.tsx","webpack:///./public/app/features/users/UsersListPage.tsx","webpack:///./public/app/features/users/state/selectors.ts","webpack:///./public/app/features/users/state/actions.ts","webpack:///./public/app/features/users/UsersActionBar.tsx"],"names":["UsersTable","props","users","onRoleChange","onRemoveUser","useState","showRemoveModal","setShowRemoveModal","className","style","width","map","user","index","key","userId","src","avatarUrl","title","login","email","name","lastSeenAtAge","value","role","onChange","newRole","size","variant","onClick","icon","body","confirmText","onDismiss","isOpen","onConfirm","InviteeRow","this","invitee","revokeInvite","getText","url","code","PureComponent","mapDispatchToProps","connect","InviteesTable","invitees","id","UsersListPage","updatedUser","updateUser","onShowInvites","setState","prevState","showInvites","getPaginatedUsers","offset","searchPage","slice","externalUserMngInfo","externalUserMngInfoHtml","renderMarkdown","state","fetchUsers","fetchInvitees","loadUsers","loadInvitees","setUsersSearchPage","paginatedUsers","totalPages","Math","ceil","length","spacing","removeUser","justify","onNavigate","currentPage","numberOfPages","hideWhenSinglePage","navModel","hasFetched","Contents","isLoading","dangerouslySetInnerHTML","__html","renderTable","setUsersSearchQuery","hot","module","getNavModel","navIndex","getUsers","searchQuery","getUsersSearchQuery","getUsersSearchPage","getInvitees","regex","RegExp","filter","test","getInviteesCount","dispatch","getBackendSrv","get","usersLoaded","inviteesLoaded","patch","delete","UsersActionBar","canInvite","externalUserMngLinkName","externalUserMngLinkUrl","pendingInvitesCount","options","label","labelClassName","inputClassName","placeholder","marginLeft","href","target","rel"],"mappings":"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","file":"UsersListPage.1c3a1c85d09a392be724.js","sourcesContent":["import React, { FC, useState } from 'react';\nimport { OrgUser } from 'app/types';\nimport { OrgRolePicker } from '../admin/OrgRolePicker';\nimport { Button, ConfirmModal } from '@grafana/ui';\nimport { OrgRole } from '@grafana/data';\n\nexport interface Props {\n  users: OrgUser[];\n  onRoleChange: (role: OrgRole, user: OrgUser) => void;\n  onRemoveUser: (user: OrgUser) => void;\n}\n\nconst UsersTable: FC<Props> = (props) => {\n  const { users, onRoleChange, onRemoveUser } = props;\n\n  const [showRemoveModal, setShowRemoveModal] = useState<string | boolean>(false);\n  return (\n    <table className=\"filter-table form-inline\">\n      <thead>\n        <tr>\n          <th />\n          <th>Login</th>\n          <th>Email</th>\n          <th>Name</th>\n          <th>Seen</th>\n          <th>Role</th>\n          <th style={{ width: '34px' }} />\n        </tr>\n      </thead>\n      <tbody>\n        {users.map((user, index) => {\n          return (\n            <tr key={`${user.userId}-${index}`}>\n              <td className=\"width-2 text-center\">\n                <img className=\"filter-table__avatar\" src={user.avatarUrl} />\n              </td>\n              <td className=\"max-width-6\">\n                <span className=\"ellipsis\" title={user.login}>\n                  {user.login}\n                </span>\n              </td>\n\n              <td className=\"max-width-5\">\n                <span className=\"ellipsis\" title={user.email}>\n                  {user.email}\n                </span>\n              </td>\n              <td className=\"max-width-5\">\n                <span className=\"ellipsis\" title={user.name}>\n                  {user.name}\n                </span>\n              </td>\n              <td className=\"width-1\">{user.lastSeenAtAge}</td>\n\n              <td className=\"width-8\">\n                <OrgRolePicker value={user.role} onChange={(newRole) => onRoleChange(newRole, user)} />\n              </td>\n\n              <td>\n                <Button size=\"sm\" variant=\"destructive\" onClick={() => setShowRemoveModal(user.login)} icon=\"times\" />\n                <ConfirmModal\n                  body={`Are you sure you want to delete user ${user.login}?`}\n                  confirmText=\"Delete\"\n                  title=\"Delete\"\n                  onDismiss={() => setShowRemoveModal(false)}\n                  isOpen={user.login === showRemoveModal}\n                  onConfirm={() => {\n                    onRemoveUser(user);\n                  }}\n                />\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nexport default UsersTable;\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Invitee } from 'app/types';\nimport { revokeInvite } from './state/actions';\nimport { Button, ClipboardButton } from '@grafana/ui';\n\nexport interface Props {\n  invitee: Invitee;\n  revokeInvite: typeof revokeInvite;\n}\n\nclass InviteeRow extends PureComponent<Props> {\n  render() {\n    const { invitee, revokeInvite } = this.props;\n    return (\n      <tr>\n        <td>{invitee.email}</td>\n        <td>{invitee.name}</td>\n        <td className=\"text-right\">\n          <ClipboardButton variant=\"secondary\" size=\"sm\" getText={() => invitee.url}>\n            Copy Invite\n          </ClipboardButton>\n          &nbsp;\n        </td>\n        <td>\n          <Button variant=\"destructive\" size=\"sm\" icon=\"times\" onClick={() => revokeInvite(invitee.code)} />\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst mapDispatchToProps = {\n  revokeInvite,\n};\n\nexport default connect(() => {\n  return {};\n}, mapDispatchToProps)(InviteeRow);\n","import React, { PureComponent } from 'react';\nimport { Invitee } from 'app/types';\nimport InviteeRow from './InviteeRow';\n\nexport interface Props {\n  invitees: Invitee[];\n}\n\nexport default class InviteesTable extends PureComponent<Props> {\n  render() {\n    const { invitees } = this.props;\n\n    return (\n      <table className=\"filter-table form-inline\">\n        <thead>\n          <tr>\n            <th>Email</th>\n            <th>Name</th>\n            <th />\n            <th style={{ width: '34px' }} />\n          </tr>\n        </thead>\n        <tbody>\n          {invitees.map((invitee, index) => {\n            return <InviteeRow key={`${invitee.id}-${index}`} invitee={invitee} />;\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { NavModel, renderMarkdown } from '@grafana/data';\nimport { HorizontalGroup, Pagination, VerticalGroup } from '@grafana/ui';\n\nimport Page from 'app/core/components/Page/Page';\nimport UsersActionBar from './UsersActionBar';\nimport UsersTable from './UsersTable';\nimport InviteesTable from './InviteesTable';\nimport { Invitee, OrgUser, OrgRole } from 'app/types';\nimport { loadInvitees, loadUsers, removeUser, updateUser } from './state/actions';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { getInvitees, getUsers, getUsersSearchQuery, getUsersSearchPage } from './state/selectors';\nimport { setUsersSearchQuery, setUsersSearchPage } from './state/reducers';\n\nexport interface Props {\n  navModel: NavModel;\n  invitees: Invitee[];\n  users: OrgUser[];\n  searchQuery: string;\n  searchPage: number;\n  externalUserMngInfo: string;\n  hasFetched: boolean;\n  loadUsers: typeof loadUsers;\n  loadInvitees: typeof loadInvitees;\n  setUsersSearchQuery: typeof setUsersSearchQuery;\n  setUsersSearchPage: typeof setUsersSearchPage;\n  updateUser: typeof updateUser;\n  removeUser: typeof removeUser;\n}\n\nexport interface State {\n  showInvites: boolean;\n}\n\nconst pageLimit = 30;\n\nexport class UsersListPage extends PureComponent<Props, State> {\n  externalUserMngInfoHtml: string;\n\n  constructor(props: Props) {\n    super(props);\n\n    if (this.props.externalUserMngInfo) {\n      this.externalUserMngInfoHtml = renderMarkdown(this.props.externalUserMngInfo);\n    }\n\n    this.state = {\n      showInvites: false,\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n    this.fetchInvitees();\n  }\n\n  async fetchUsers() {\n    return await this.props.loadUsers();\n  }\n\n  async fetchInvitees() {\n    return await this.props.loadInvitees();\n  }\n\n  onRoleChange = (role: OrgRole, user: OrgUser) => {\n    const updatedUser = { ...user, role: role };\n\n    this.props.updateUser(updatedUser);\n  };\n\n  onShowInvites = () => {\n    this.setState((prevState) => ({\n      showInvites: !prevState.showInvites,\n    }));\n  };\n\n  getPaginatedUsers = (users: OrgUser[]) => {\n    const offset = (this.props.searchPage - 1) * pageLimit;\n    return users.slice(offset, offset + pageLimit);\n  };\n\n  renderTable() {\n    const { invitees, users, setUsersSearchPage } = this.props;\n    const paginatedUsers = this.getPaginatedUsers(users);\n    const totalPages = Math.ceil(users.length / pageLimit);\n\n    if (this.state.showInvites) {\n      return <InviteesTable invitees={invitees} />;\n    } else {\n      return (\n        <VerticalGroup spacing=\"md\">\n          <UsersTable\n            users={paginatedUsers}\n            onRoleChange={(role, user) => this.onRoleChange(role, user)}\n            onRemoveUser={(user) => this.props.removeUser(user.userId)}\n          />\n          <HorizontalGroup justify=\"flex-end\">\n            <Pagination\n              onNavigate={setUsersSearchPage}\n              currentPage={this.props.searchPage}\n              numberOfPages={totalPages}\n              hideWhenSinglePage={true}\n            />\n          </HorizontalGroup>\n        </VerticalGroup>\n      );\n    }\n  }\n\n  render() {\n    const { navModel, hasFetched } = this.props;\n    const externalUserMngInfoHtml = this.externalUserMngInfoHtml;\n\n    return (\n      <Page navModel={navModel}>\n        <Page.Contents isLoading={!hasFetched}>\n          <>\n            <UsersActionBar onShowInvites={this.onShowInvites} showInvites={this.state.showInvites} />\n            {externalUserMngInfoHtml && (\n              <div className=\"grafana-info-box\" dangerouslySetInnerHTML={{ __html: externalUserMngInfoHtml }} />\n            )}\n            {hasFetched && this.renderTable()}\n          </>\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nfunction mapStateToProps(state: any) {\n  return {\n    navModel: getNavModel(state.navIndex, 'users'),\n    users: getUsers(state.users),\n    searchQuery: getUsersSearchQuery(state.users),\n    searchPage: getUsersSearchPage(state.users),\n    invitees: getInvitees(state.users),\n    externalUserMngInfo: state.users.externalUserMngInfo,\n    hasFetched: state.users.hasFetched,\n  };\n}\n\nconst mapDispatchToProps = {\n  loadUsers,\n  loadInvitees,\n  setUsersSearchQuery,\n  setUsersSearchPage,\n  updateUser,\n  removeUser,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(UsersListPage));\n","import { UsersState } from 'app/types';\n\nexport const getUsers = (state: UsersState) => {\n  const regex = new RegExp(state.searchQuery, 'i');\n\n  return state.users.filter((user) => {\n    return regex.test(user.login) || regex.test(user.email) || regex.test(user.name);\n  });\n};\n\nexport const getInvitees = (state: UsersState) => {\n  const regex = new RegExp(state.searchQuery, 'i');\n\n  return state.invitees.filter((invitee) => {\n    return regex.test(invitee.name) || regex.test(invitee.email);\n  });\n};\n\nexport const getInviteesCount = (state: UsersState) => state.invitees.length;\nexport const getUsersSearchQuery = (state: UsersState) => state.searchQuery;\nexport const getUsersSearchPage = (state: UsersState) => state.searchPage;\n","import { ThunkResult } from '../../../types';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { OrgUser } from 'app/types';\nimport { inviteesLoaded, usersLoaded } from './reducers';\n\nexport function loadUsers(): ThunkResult<void> {\n  return async (dispatch) => {\n    const users = await getBackendSrv().get('/api/org/users');\n    dispatch(usersLoaded(users));\n  };\n}\n\nexport function loadInvitees(): ThunkResult<void> {\n  return async (dispatch) => {\n    const invitees = await getBackendSrv().get('/api/org/invites');\n    dispatch(inviteesLoaded(invitees));\n  };\n}\n\nexport function updateUser(user: OrgUser): ThunkResult<void> {\n  return async (dispatch) => {\n    await getBackendSrv().patch(`/api/org/users/${user.userId}`, { role: user.role });\n    dispatch(loadUsers());\n  };\n}\n\nexport function removeUser(userId: number): ThunkResult<void> {\n  return async (dispatch) => {\n    await getBackendSrv().delete(`/api/org/users/${userId}`);\n    dispatch(loadUsers());\n  };\n}\n\nexport function revokeInvite(code: string): ThunkResult<void> {\n  return async (dispatch) => {\n    await getBackendSrv().patch(`/api/org/invites/${code}/revoke`, {});\n    dispatch(loadInvitees());\n  };\n}\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { setUsersSearchQuery } from './state/reducers';\nimport { getInviteesCount, getUsersSearchQuery } from './state/selectors';\nimport { FilterInput } from 'app/core/components/FilterInput/FilterInput';\nimport { RadioButtonGroup, LinkButton } from '@grafana/ui';\n\nexport interface Props {\n  searchQuery: string;\n  setUsersSearchQuery: typeof setUsersSearchQuery;\n  onShowInvites: () => void;\n  pendingInvitesCount: number;\n  canInvite: boolean;\n  showInvites: boolean;\n  externalUserMngLinkUrl: string;\n  externalUserMngLinkName: string;\n}\n\nexport class UsersActionBar extends PureComponent<Props> {\n  render() {\n    const {\n      canInvite,\n      externalUserMngLinkName,\n      externalUserMngLinkUrl,\n      searchQuery,\n      pendingInvitesCount,\n      setUsersSearchQuery,\n      onShowInvites,\n      showInvites,\n    } = this.props;\n    const options = [\n      { label: 'Users', value: 'users' },\n      { label: `Pending Invites (${pendingInvitesCount})`, value: 'invites' },\n    ];\n\n    return (\n      <div className=\"page-action-bar\">\n        <div className=\"gf-form gf-form--grow\">\n          <FilterInput\n            labelClassName=\"gf-form--has-input-icon\"\n            inputClassName=\"gf-form-input width-20\"\n            value={searchQuery}\n            onChange={setUsersSearchQuery}\n            placeholder=\"Search user by login, email or name\"\n          />\n          {pendingInvitesCount > 0 && (\n            <div style={{ marginLeft: '1rem' }}>\n              <RadioButtonGroup value={showInvites ? 'invites' : 'users'} options={options} onChange={onShowInvites} />\n            </div>\n          )}\n          <div className=\"page-action-bar__spacer\" />\n          {canInvite && <LinkButton href=\"org/users/invite\">Invite</LinkButton>}\n          {externalUserMngLinkUrl && (\n            <LinkButton href={externalUserMngLinkUrl} target=\"_blank\" rel=\"noopener\">\n              {externalUserMngLinkName}\n            </LinkButton>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state: any) {\n  return {\n    searchQuery: getUsersSearchQuery(state.users),\n    pendingInvitesCount: getInviteesCount(state.users),\n    externalUserMngLinkName: state.users.externalUserMngLinkName,\n    externalUserMngLinkUrl: state.users.externalUserMngLinkUrl,\n    canInvite: state.users.canInvite,\n  };\n}\n\nconst mapDispatchToProps = {\n  setUsersSearchQuery,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersActionBar);\n"],"sourceRoot":""}